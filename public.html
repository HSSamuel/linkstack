<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Profile</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* OVERRIDES for the Public Page */
        body {
            /* Reset the grid layout so it's just one full screen */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            margin: 0;
            background-image: var(--bg-image, none); /* Dynamic BG */
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }

        /* Hide the Editor and Main Container structure */
        .main-container, .editor-section, .preview-section {
            display: none !important;
        }

        /* The Profile Card (simulating the phone, but responsive) */
        .public-card {
            width: 100%;
            max-width: 400px;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            padding: 40px 20px;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            border: 1px solid rgba(255,255,255,0.4);
            animation: fadeIn 0.5s ease-out;
        }

        /* Avatar & Text Styling */
        .public-avatar {
            width: 120px; height: 120px;
            border-radius: 50%;
            border: 4px solid white;
            margin: 0 auto 15px;
            background-size: cover; background-position: center;
            box-shadow: 0 10px 20px rgba(0,0,0,0.15);
        }
        h1 { margin: 0 0 5px; font-size: 26px; color: #1f2937; }
        .bio { 
            display: inline-block; padding: 6px 16px; 
            background: rgba(0,0,0,0.1); border-radius: 20px; 
            font-size: 14px; margin-bottom: 30px; 
        }

        /* Links */
        .public-links { display: flex; flex-direction: column; gap: 15px; }
        .link-btn {
            display: block; padding: 16px;
            text-decoration: none; font-weight: bold;
            border-radius: 12px; transition: transform 0.2s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }
        .link-btn:hover { transform: scale(1.02); }

        /* Animation */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <div class="public-card" id="profileContainer">
        </div>

    <script>
        // 1. Get Data from LocalStorage
        const savedData = localStorage.getItem('linkstack-data');
        
        if (savedData) {
            const state = JSON.parse(savedData);
            const container = document.getElementById('profileContainer');

            // 2. Apply Theme Background to BODY
            if (state.themeImage) {
                document.body.style.backgroundImage = `url('${state.themeImage}')`;
            } else {
                document.body.style.background = "linear-gradient(135deg, #1e1b4b 0%, #4c1d95 100%)";
            }

            // 3. Determine Colors (Dark vs Light text)
            const isWhiteText = state.themeTextColor === 'white';
            const textColor = isWhiteText ? 'white' : '#1f2937';
            const bioBg = isWhiteText ? 'rgba(255,255,255,0.2)' : 'rgba(0,0,0,0.1)';
            
            // Link Styles
            const linkStyle = isWhiteText 
                ? 'background: rgba(255,255,255,0.15); border: 1px solid rgba(255,255,255,0.3); color: white;' 
                : 'background: rgba(255,255,255,0.85); border: 1px solid #e5e7eb; color: #1f2937;';

            // 4. Build HTML
            container.innerHTML = `
                <div class="public-avatar" style="background-image: url('${state.image || ""}');"></div>
                <h1 style="color: ${textColor}; text-shadow: ${isWhiteText ? '0 2px 4px rgba(0,0,0,0.5)' : 'none'}">${state.name}</h1>
                <p class="bio" style="color: ${textColor}; background: ${bioBg};">${state.bio}</p>
                
                <div class="public-links">
                    ${state.links.map(link => `
                        <a href="${link.url}" target="_blank" class="link-btn" style="${linkStyle}">
                            ${link.title}
                        </a>
                    `).join('')}
                </div>
            `;

            // Adjust Card Background for Dark Mode transparency
            if (isWhiteText) {
                container.style.background = "rgba(0, 0, 0, 0.2)"; // Dark glass
                container.style.border = "1px solid rgba(255,255,255,0.2)";
            }

        } else {
            document.body.innerHTML = "<h2 style='color:white; text-align:center;'>No profile found. Go back to the builder!</h2>";
        }
    </script>
</body>
</html>